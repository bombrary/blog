<!DOCTYPE html>
<html lang="ja-jp">
<title>GraphvizでTeXの数式を表示する(1) | Chanomic Blog</title>
<meta charset="utf-8">
<meta name="generator" content="Hugo 0.109.0">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<link rel="stylesheet" href="https://bombrary.github.io/blog/css/index.css">
<link rel="canonical" href="https://bombrary.github.io/blog/posts/graphviz-tex01/">
<link rel="alternate" type="application/rss+xml" href="" title="Chanomic Blog">
  <link rel="stylesheet" href="/blog/css/custom.css">

  <link rel="stylesheet" href="/blog/css/syntax.css">



<script async src="https://www.googletagmanager.com/gtag/js?id=UA-152083322-1"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'UA-152083322-1');
</script>



<meta property="og:title" content="GraphvizでTeXの数式を表示する(1)" />
<meta property="og:description" content="Graphvizはグラフを描画してくれる素晴らしいソフトなのだが、単体では数式を表示することができない。
dot2tex dot2texを利用すると、グラフのラベルに数式が使えるようになる。
次の手順でグラフを作る。
dot言語でグラフを書く dot2texでdotファイルをtexファイルに変換 texを使ってpdfなりsvgなりを作る。 pdfならplatex &#43; dvipdfを使う(詳細は別記事にて) svgならplatex &#43; dvisvgmを使う。 いやGraphviz使ってないじゃないか、と思うかもしれない。しかしDependensiesにGraphvizが含まれているから、おそらくGraphvizの描画エンジンを利用してノードの位置を決定しているのだと思う。
インストール Python製のソフトウェアみたいで、pip経由でインストールする。
$ pip3 install dot2tex 利用の手順 dot言語でグラフを書く 今回は次のようにする。ファイル名は適当にgraph.dotとする。
digraph { graph [ rankdir=&#34;LR&#34; ] node [ shape=&#34;circle&#34;, fixedsize=true, height=0.6 ] Q0 [texlbl=&#34;$q_0$&#34;]; Q1 [texlbl=&#34;$q_1$&#34;]; Q2 [texlbl=&#34;$q_2$&#34;]; Q3 [texlbl=&#34;$q_3$&#34;]; Q4 [texlbl=&#34;$q_4$&#34;]; Q5 [texlbl=&#34;$q_5$&#34;]; Q6 [texlbl=&#34;$q_6$&#34;]; Q7 [texlbl=&#34;$q_7$&#34;]; Q8 [texlbl=&#34;$q_8$&#34;]; Q9 [texlbl=&#34;$q_9$&#34;]; Q10 [texlbl=&#34;$q_{10}$&#34;]; Q11 [texlbl=&#34;$q_{11}$&#34;]; Q12 [texlbl=&#34;$q_{12}$&#34;]; Q13 [texlbl=&#34;$q_{13}$&#34;]; Q0 -&gt; Q1 [label=&#34; &#34;, texlbl=&#34;$\varepsilon$&#34;]; Q0 -&gt; Q4 [label=&#34; &#34;, texlbl=&#34;$\varepsilon$&#34;]; Q0 -&gt; Q7 [label=&#34; &#34;, texlbl=&#34;$\varepsilon$&#34;]; Q1 -&gt; Q2 [label=&#34; &#34;, texlbl=&#34;$a$&#34;]; Q2 -&gt; Q3 [label=&#34; &#34;, texlbl=&#34;$b$&#34;]; Q3 -&gt; Q7 [label=&#34; &#34;, texlbl=&#34;$\varepsilon$&#34;]; Q4 -&gt; Q5 [label=&#34; &#34;, texlbl=&#34;$b$&#34;]; Q5 -&gt; Q6 [label=&#34; &#34;, texlbl=&#34;$b$&#34;]; Q6 -&gt; Q7 [label=&#34; &#34;, texlbl=&#34;$\varepsilon$&#34;]; Q7 -&gt; Q8 [label=&#34; &#34;, texlbl=&#34;$a$&#34;]; Q7 -&gt; Q0 [label=&#34; &#34;, texlbl=&#34;$\varepsilon$&#34;]; Q8 -&gt; Q9 [label=&#34; &#34;, texlbl=&#34;$\varepsilon$&#34;]; Q8 -&gt; Q11 [label=&#34; &#34;, texlbl=&#34;$\varepsilon$&#34;]; Q9 -&gt; Q10 [label=&#34; &#34;, texlbl=&#34;$b$&#34;]; Q10 -&gt; Q13 [label=&#34; &#34;, texlbl=&#34;$\varepsilon$&#34;]; Q11 -&gt; Q12 [label=&#34; &#34;, texlbl=&#34;$c$&#34;]; Q12 -&gt; Q13 [label=&#34; &#34;, texlbl=&#34;$\varepsilon$&#34;]; } texlblとはdot2texが読むための属性。おそらくtex labelの略で、これがnodeまたはedgeのラベルとして、texファイルに直接展開される。そのため、数式を描きたいなら$で囲む。もしdotファイル上にlabel属性が定義されていたら、texlblの内容に上書きされる。" />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://bombrary.github.io/blog/posts/graphviz-tex01/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2020-01-26T14:00:25+09:00" />
<meta property="article:modified_time" content="2020-02-11T23:33:59+09:00" />

<meta name="twitter:card" content="summary"/>
<meta name="twitter:title" content="GraphvizでTeXの数式を表示する(1)"/>
<meta name="twitter:description" content="Graphvizはグラフを描画してくれる素晴らしいソフトなのだが、単体では数式を表示することができない。
dot2tex dot2texを利用すると、グラフのラベルに数式が使えるようになる。
次の手順でグラフを作る。
dot言語でグラフを書く dot2texでdotファイルをtexファイルに変換 texを使ってpdfなりsvgなりを作る。 pdfならplatex &#43; dvipdfを使う(詳細は別記事にて) svgならplatex &#43; dvisvgmを使う。 いやGraphviz使ってないじゃないか、と思うかもしれない。しかしDependensiesにGraphvizが含まれているから、おそらくGraphvizの描画エンジンを利用してノードの位置を決定しているのだと思う。
インストール Python製のソフトウェアみたいで、pip経由でインストールする。
$ pip3 install dot2tex 利用の手順 dot言語でグラフを書く 今回は次のようにする。ファイル名は適当にgraph.dotとする。
digraph { graph [ rankdir=&#34;LR&#34; ] node [ shape=&#34;circle&#34;, fixedsize=true, height=0.6 ] Q0 [texlbl=&#34;$q_0$&#34;]; Q1 [texlbl=&#34;$q_1$&#34;]; Q2 [texlbl=&#34;$q_2$&#34;]; Q3 [texlbl=&#34;$q_3$&#34;]; Q4 [texlbl=&#34;$q_4$&#34;]; Q5 [texlbl=&#34;$q_5$&#34;]; Q6 [texlbl=&#34;$q_6$&#34;]; Q7 [texlbl=&#34;$q_7$&#34;]; Q8 [texlbl=&#34;$q_8$&#34;]; Q9 [texlbl=&#34;$q_9$&#34;]; Q10 [texlbl=&#34;$q_{10}$&#34;]; Q11 [texlbl=&#34;$q_{11}$&#34;]; Q12 [texlbl=&#34;$q_{12}$&#34;]; Q13 [texlbl=&#34;$q_{13}$&#34;]; Q0 -&gt; Q1 [label=&#34; &#34;, texlbl=&#34;$\varepsilon$&#34;]; Q0 -&gt; Q4 [label=&#34; &#34;, texlbl=&#34;$\varepsilon$&#34;]; Q0 -&gt; Q7 [label=&#34; &#34;, texlbl=&#34;$\varepsilon$&#34;]; Q1 -&gt; Q2 [label=&#34; &#34;, texlbl=&#34;$a$&#34;]; Q2 -&gt; Q3 [label=&#34; &#34;, texlbl=&#34;$b$&#34;]; Q3 -&gt; Q7 [label=&#34; &#34;, texlbl=&#34;$\varepsilon$&#34;]; Q4 -&gt; Q5 [label=&#34; &#34;, texlbl=&#34;$b$&#34;]; Q5 -&gt; Q6 [label=&#34; &#34;, texlbl=&#34;$b$&#34;]; Q6 -&gt; Q7 [label=&#34; &#34;, texlbl=&#34;$\varepsilon$&#34;]; Q7 -&gt; Q8 [label=&#34; &#34;, texlbl=&#34;$a$&#34;]; Q7 -&gt; Q0 [label=&#34; &#34;, texlbl=&#34;$\varepsilon$&#34;]; Q8 -&gt; Q9 [label=&#34; &#34;, texlbl=&#34;$\varepsilon$&#34;]; Q8 -&gt; Q11 [label=&#34; &#34;, texlbl=&#34;$\varepsilon$&#34;]; Q9 -&gt; Q10 [label=&#34; &#34;, texlbl=&#34;$b$&#34;]; Q10 -&gt; Q13 [label=&#34; &#34;, texlbl=&#34;$\varepsilon$&#34;]; Q11 -&gt; Q12 [label=&#34; &#34;, texlbl=&#34;$c$&#34;]; Q12 -&gt; Q13 [label=&#34; &#34;, texlbl=&#34;$\varepsilon$&#34;]; } texlblとはdot2texが読むための属性。おそらくtex labelの略で、これがnodeまたはedgeのラベルとして、texファイルに直接展開される。そのため、数式を描きたいなら$で囲む。もしdotファイル上にlabel属性が定義されていたら、texlblの内容に上書きされる。"/>


<header>
  
    <a href="https://bombrary.github.io/blog/" class="title">Chanomic Blog</a>
  
  
</header>


<article>
  <header>
    <h1><a href="https://bombrary.github.io/blog/posts/graphviz-tex01/">GraphvizでTeXの数式を表示する(1)</a></h1>
    <div class="meta">
      
      <div class="pub-date">
        <time datetime="2020-01-26T14:00:25&#43;09:00">January 26, 2020</time>
      </div>
      
      
      <div class="lastmod-date">
        <div class="lastmod-date__label">(last modified:</div>
        <time datetime="2020-01-26T14:00:25&#43;09:00">February 11, 2020</time>
        <div class="lastmod-date__label">)</div>
      </div>
      
    </div>
    
    <div class="tags-categories">
      <div class="tags">
        <p>tags: </p>
        <ul class="tags_list">
          <li class="tags_item"><a href="https://bombrary.github.io/blog//tags/graphviz/">Graphviz</a></li><li class="tags_item"><a href="https://bombrary.github.io/blog//tags/tex/">TeX</a></li><li class="tags_item"><a href="https://bombrary.github.io/blog//tags/dot2tex/">dot2tex</a></li>
        </ul>
        
      </div>
      <div class="categories">
        <p>categories: </p>
        
        <ul class="categories_list">
           <li class="categories_item"><a href="https://bombrary.github.io/blog//categories/graphviz/">Graphviz</a></li> <li class="categories_item"><a href="https://bombrary.github.io/blog//categories/tex/">TeX</a></li> <li class="categories_item"><a href="https://bombrary.github.io/blog//categories/%e3%82%b0%e3%83%a9%e3%83%95/">グラフ</a></li>
        </ul>
        
      </div>
    </div>
  </header>
  
  <p>Graphvizはグラフを描画してくれる素晴らしいソフトなのだが、単体では数式を表示することができない。</p>
<h2 id="dot2tex">dot2tex</h2>
<p>dot2texを利用すると、グラフのラベルに数式が使えるようになる。</p>
<p>次の手順でグラフを作る。</p>
<ol>
<li>dot言語でグラフを書く</li>
<li><code>dot2tex</code>でdotファイルをtexファイルに変換</li>
<li>texを使ってpdfなりsvgなりを作る。
<ul>
<li>pdfなら<code>platex + dvipdf</code>を使う(詳細は<a href="https://bombrary.github.io/blog/posts/graphviz-tex02/">別記事</a>にて)</li>
<li>svgなら<code>platex + dvisvgm</code>を使う。</li>
</ul>
</li>
</ol>
<p>いやGraphviz使ってないじゃないか、と思うかもしれない。しかし<a href="https://dot2tex.readthedocs.io/en/latest/installation_guide.html#dependencies">Dependensies</a>にGraphvizが含まれているから、おそらくGraphvizの描画エンジンを利用してノードの位置を決定しているのだと思う。</p>
<h2 id="インストール">インストール</h2>
<p>Python製のソフトウェアみたいで、pip経由でインストールする。</p>
<pre class="cui">
$ pip3 install dot2tex
</pre>
<h2 id="利用の手順">利用の手順</h2>
<h3 id="dot言語でグラフを書く">dot言語でグラフを書く</h3>
<p>今回は次のようにする。ファイル名は適当に<code>graph.dot</code>とする。</p>
<pre tabindex="0"><code class="language-dot" data-lang="dot">digraph {
  graph [ rankdir=&#34;LR&#34; ]
  node [ shape=&#34;circle&#34;, fixedsize=true, height=0.6 ]
  Q0 [texlbl=&#34;$q_0$&#34;];
  Q1 [texlbl=&#34;$q_1$&#34;];
  Q2 [texlbl=&#34;$q_2$&#34;];
  Q3 [texlbl=&#34;$q_3$&#34;];
  Q4 [texlbl=&#34;$q_4$&#34;];
  Q5 [texlbl=&#34;$q_5$&#34;];
  Q6 [texlbl=&#34;$q_6$&#34;];
  Q7 [texlbl=&#34;$q_7$&#34;];
  Q8 [texlbl=&#34;$q_8$&#34;];
  Q9 [texlbl=&#34;$q_9$&#34;];
  Q10 [texlbl=&#34;$q_{10}$&#34;];
  Q11 [texlbl=&#34;$q_{11}$&#34;];
  Q12 [texlbl=&#34;$q_{12}$&#34;];
  Q13 [texlbl=&#34;$q_{13}$&#34;];
  Q0 -&gt; Q1 [label=&#34; &#34;, texlbl=&#34;$\varepsilon$&#34;];
  Q0 -&gt; Q4 [label=&#34; &#34;, texlbl=&#34;$\varepsilon$&#34;];
  Q0 -&gt; Q7 [label=&#34; &#34;, texlbl=&#34;$\varepsilon$&#34;];
  Q1 -&gt; Q2 [label=&#34; &#34;, texlbl=&#34;$a$&#34;];
  Q2 -&gt; Q3 [label=&#34; &#34;, texlbl=&#34;$b$&#34;];
  Q3 -&gt; Q7 [label=&#34; &#34;, texlbl=&#34;$\varepsilon$&#34;];
  Q4 -&gt; Q5 [label=&#34; &#34;, texlbl=&#34;$b$&#34;];
  Q5 -&gt; Q6 [label=&#34; &#34;, texlbl=&#34;$b$&#34;];
  Q6 -&gt; Q7 [label=&#34; &#34;, texlbl=&#34;$\varepsilon$&#34;];
  Q7 -&gt; Q8 [label=&#34; &#34;, texlbl=&#34;$a$&#34;];
  Q7 -&gt; Q0 [label=&#34; &#34;, texlbl=&#34;$\varepsilon$&#34;];
  Q8 -&gt; Q9 [label=&#34; &#34;, texlbl=&#34;$\varepsilon$&#34;];
  Q8 -&gt; Q11 [label=&#34; &#34;, texlbl=&#34;$\varepsilon$&#34;];
  Q9 -&gt; Q10 [label=&#34; &#34;, texlbl=&#34;$b$&#34;];
  Q10 -&gt; Q13 [label=&#34; &#34;, texlbl=&#34;$\varepsilon$&#34;];
  Q11 -&gt; Q12 [label=&#34; &#34;, texlbl=&#34;$c$&#34;];
  Q12 -&gt; Q13 [label=&#34; &#34;, texlbl=&#34;$\varepsilon$&#34;];
}
</code></pre><p><code>texlbl</code>とはdot2texが読むための属性。おそらくtex labelの略で、これがnodeまたはedgeのラベルとして、texファイルに直接展開される。そのため、数式を描きたいなら<code>$</code>で囲む。もしdotファイル上にlabel属性が定義されていたら、<code>texlbl</code>の内容に上書きされる。</p>
<p>edgeに対して<code>texlbl</code>を使いたいなら、ダミー用の<code>label</code>属性をつける必要がある。これをやらないとラベルが表示されないので注意(<a href="https://dot2tex.readthedocs.io/en/latest/usage_guide.html#labels">参考</a>)。しかも、<strong>ダミーに指定するlabelの内容は空文字では駄目で、空白でも良いから1文字以上の文字列を指定する必要がある。</strong> これが分からなくて数十分はまっていた。</p>
<h3 id="texに変換">texに変換</h3>
<pre class="cui">
$ dot2tex graph.dot > graph.tex
</pre>
<h3 id="svgに変換">svgに変換</h3>
<pre class="cui">
$ platex graph.tex
$ dvisvgm graph.dvi
</pre>
<p>他にも、一旦pdfに変換してから<code>pdftocairo</code>を使ってsvgに変換するのもあり。</p>
<p>出来上がった画像がこちら。</p>
<figure><img src="./graph.svg"/>
</figure>

<p>良い感じ。</p>
<h2 id="参考">参考</h2>
<ul>
<li><a href="https://dot2tex.readthedocs.io/en/latest/">dot2tex</a></li>
<li><a href="https://www.graphviz.org">Graphviz</a></li>
</ul>

</article>



</html>

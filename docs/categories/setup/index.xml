<?xml version="1.0" encoding="utf-8" standalone="yes"?>
<rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom">
  <channel>
    <title>setup on Chanomic Blog</title>
    <link>https://bombrary.github.io/blog/categories/setup/</link>
    <description>Recent content in setup on Chanomic Blog</description>
    <generator>Hugo -- gohugo.io</generator>
    <language>ja-jp</language>
    <lastBuildDate>Sat, 13 Jan 2024 11:23:15 +0900</lastBuildDate>
    <atom:link href="https://bombrary.github.io/blog/categories/setup/index.xml" rel="self" type="application/rss+xml" />
    <item>
      <title>NixOSをWSL2上で構築したときのメモ</title>
      <link>https://bombrary.github.io/blog/posts/nixos-wsl-setup/</link>
      <pubDate>Sat, 13 Jan 2024 11:23:15 +0900</pubDate>
      <guid>https://bombrary.github.io/blog/posts/nixos-wsl-setup/</guid>
      <description>年末からお正月の間帰省したときにWindowsのラップトップを持っていった。しかしWSL2にはUbuntuしか入っておらず、最近デスクトップで使っているNixOSが入っていなかった。そこで試しに構築してみたときのメモ。最低限コーディングができる環境が整った。&#xA;（IT系あるあるだけれど）NixOS-WSLの開発はまあまあ早いため、ここに書いてある内容もすぐ陳腐化してしまいそう。&#xA;インストール RepositoryのReleasesからnixos-wsl.tar.gzをDLしてくる&#xA;コマンドプロンプト or PowerShell で以下のコマンドを実行&#xA;wsl --import NixOS .\NixOS\ nixos-wsl.tar.gz --version 2 wsl -d NixOS nix-channel --update Flake化による初回セットアップ 今回はなるべくnix-channelを使わず、flake.nixからなるべく必要なファイルを入れるようにしたい。そのほうが、今後再セットアップするときにそのflakeファイルを指定するだけで環境が構築できることを期待しているため。&#xA;とはいえ、現状のNixOSにはVimもGitも入っておらず限界があるので、それはChannelから入手する。まず現時点での最新版のnixosのChannelを登録する。&#xA;sudo nix-channel --add https://nixos.org/channels/nixos-23.11 nixos sudo nix-channel --update 次にVimとGitを入れる&#xA;nix-shell -p vim git NixOSで最強のLinuxデスクトップを作ろうやUsing nix flakes with NixOSに書かれている内容を参考に進めていく。まずconfiguration.nixを持ってくる。&#xA;cp /etc/nixos/* . flake.nixを作成し以下のようにする。&#xA;inputsにnixosのリポジトリと、NixOS-WSLのリポジトリを指定する inputsの書き方はattribute setとurl-likeな書き方の2種類がある。url-likeな書き方だとtag指定の方法がわからなかったので、NixOS-WSLのinputに関してはattribute setで書いている nixosSystemの引数としてspecialArgsが指定でき、これでconfiguration.nixに引数を渡せる { inputs = { nixos.url = &amp;#34;github:NixOS/nixpkgs/nixos-23.11&amp;#34;; nixos-wsl = { type = &amp;#34;github&amp;#34;; owner = &amp;#34;nix-community&amp;#34;; repo = &amp;#34;NixOS-WSL&amp;#34;; ref = &amp;#34;2311.</description>
    </item>
  </channel>
</rss>
